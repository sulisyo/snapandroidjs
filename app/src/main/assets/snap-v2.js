!function(){"use strict";var t=JSON.parse('{"Cm":"https://app.stg.midtrans.com","S3":"/snap"}');window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));const e=t.Cm,n=t.S3;let o;function i(t){return(t.indexOf(e)>-1||t.indexOf("veritrans.co.id")>-1)&&(t.indexOf("snap.js")>-1||t.indexOf("snap.min.js")>-1)}function r(){try{if(window.performance&&window.performance.getEntries){const t=window.performance.getEntries();let e=null;for(let n=0;n<t.length;n++){if(i(t[n].name)){e=t[n];break}}if(e)return e.duration}}catch(t){}return null}class s{constructor(t){const o=e+n+"/v1/pay?origin_host="+window.location.origin+"&digest=5342b5120e2ef242e4bf412305a81f5e89871e04b57207966691ba09b3b9f80d"+(t?"&client_key="+t:"")+"#/",i=document.createElement("iframe");i.src=o,i.id="snap-midtrans",i.style.cssText="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 999999; border: 0;",this.pageUrl=o,this.clientKey=t,this.iframe=i,this.attached=!1}goHome(){return this.iframe.src=this.pageUrl,this.ensureAttached(),this}postMessage(t){return this.ensureAttached(),this.iframe.contentWindow.postMessage(t,e),this}hide(){return this.iframe.style.display="none",s.setParentStyle(!1),this.goHome(),this.detach(),this}show(){return this.ensureAttached(),this.iframe.style.display="block",s.setParentStyle(!0),this}isVisible(){return"none"!==this.iframe.style.display}ensureAttached(){this.attached||this.attach()}attach(){this.attached||!document.body||"interactive"!==document.readyState&&"complete"!==document.readyState||(this.iframe.name="popup_"+ +new Date,document.body.appendChild(this.iframe),this.attached=!0)}detach(){this.attached&&(this.iframe.parentNode.removeChild(this.iframe),this.attached=!1)}static setParentStyle(t){t?(o||(o={position:s.isMobile()?document.body.style.position:null,overflow:document.body.style.overflow,width:document.body.style.width,height:document.body.style.height,pageXOffset:window.pageXOffset,pageYOffset:window.pageYOffset}),document.body.style.overflow="hidden",document.body.style.width="100vw",document.body.style.height="100vh",s.isMobile()&&(document.body.style.position="fixed"),window.scroll(0,0)):o&&(s.isMobile()&&(document.body.style.position=o.position),document.body.style.overflow=o.overflow,document.body.style.width=o.width,document.body.style.height=o.height,window.scroll(o.pageXOffset,o.pageYOffset))}static isMobile(){return window.innerWidth<568}}const a="unInitialized",d="initialized",c="loading",l="PopupInView";let h,u,f,p=a;function w(t,e,n,o){return function(){if(-1===n.indexOf(p))throw new Error(`snap.${t} is not allowed to be called in this state. Invalid state transition from ${p} to ${o}`);const i=e.apply(null,arguments);return p=o,i}}let y={};function m(t){if(t.origin!==e)return;const n=t.data;switch(n.event){case"hide":h.isVisible()&&y.onClose&&y.onClose(),k.hide();break;case"queryToken":u&&(h.postMessage({event:"token",token:u,scriptLoadDuration:r(),snapPayStartedAt:f,options:E(y)}),h.show(),p=l);break;case"deeplink":{const t=n.data;t&&window.location.replace(t);break}case"result":{const t=n.data,e=String(t.status_code),o=function(){return"200"===e&&y.onSuccess?y.onSuccess(t):"201"===e&&y.onPending?y.onPending(t):-1===["200","201"].indexOf(e)&&y.onError?y.onError(t):void(t.finish_redirect_url&&(window.location.href=t.finish_redirect_url))};try{o()}catch(t){console.error(t)}k.hide();break}case"debug":break;default:throw new Error("Invalid event data: "+n.event)}}function g(t){return(e,n)=>{if(t!==typeof n)throw new Error(e+" should be of type "+t);return!0}}const b={onSuccess:g("function"),onPending:g("function"),onError:g("function"),onClose:g("function"),skipOrderSummary:g("boolean"),autoCloseDelay:g("number"),language:g("string"),enabledPayments:(v="string",(t,e)=>{if("[object Array]"!==Object.prototype.toString.call(e))throw new Error(t+" should be an array of "+v);return e.forEach((e=>{if(v!==typeof e)throw new Error(t+" should be an array of "+v)})),!0}),skipCustomerDetails:g("boolean"),showOrderId:g("boolean"),isDemoMode:g("boolean"),creditCardNumber:g("string"),creditCardCvv:g("string"),creditCardExpiry:g("string"),customerEmail:g("string"),customerPhone:g("string"),uiMode:g("string"),gopayMode:g("string"),selectedPaymentType:g("string")};var v;function E(t){const e={};for(const n in t)"function"!=typeof t[n]&&(e[n]=t[n]);return e}const k={show:w("show",(()=>{h.show()}),[d],c),hide:w("hide",(()=>{h.hide(),u=null}),[d,c,l],d),init:w("init",(t=>{t||console.log('Please add `data-client-key` attribute in the script tag <script type="text/javascript" src="...snap.js" data-client-key="CLIENT-KEY"><\/script>, Otherwise custom UI confirguration will not take effect'),h=new s(t),h.attach(),window.addEventListener("message",m,!1)}),[a],d),pay:w("pay",((t,e)=>{!function(t,e){if(!t)throw new Error(e+" is required")}(t,"snapToken"),y=e||{},function(t){for(const e in t)if(t.hasOwnProperty(e)){if(!b[e])throw new Error("Unsupported option "+e);(0,b[e])(e,t[e])}}(y),u=t,f=+new Date,h.attach(),h.attached&&h.goHome().postMessage({event:"notify"})}),[d,c],l),reset:w("reset",(()=>{h&&(h.detach(),h=null),window.removeEventListener("message",m,!1),o=void 0,u=null}),[d,a,c,l],a)},O=function(){let t;const e=document.getElementsByTagName("script");for(let n=0;n<e.length;n++){i(e[n].src)&&(t=e[n])}return t}(),S=O&&O.getAttribute("data-client-key")||"";k.init(S),function t(){"complete"===document.readyState?h&&h.attach():setTimeout(t,100)}(),window.snap=k}();
//# sourceMappingURL=snap-v2.staging.js.map